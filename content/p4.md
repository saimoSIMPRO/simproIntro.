# **1**  ***道路编辑器***

## **1.1** ***软件概述***

道路编辑器主要适用于静态场景设计，支持道路（Road）以及物体（Objects），信号（Signals）等的创建和相关参数的修改。场景编辑器的输出为.tdo格式的中间文件或.xodr格式的OpenDrive文件，OpenDRIVE文件主要以Xml语言编写，保存了编辑器中道路及其相关属性的信息。

以下章节描述了对场景设计软件的配置过程以及实现场景的所有必要步骤

## **1.2** ***安装配置***

 首先在文件夹中解压道路编辑器的压缩包（本文以Ubuntu 18.04，RoadDesignerV2.3为例），右键点击压缩包，选择Extract Here解压至当前文件夹（或者下面的Extract to解压至其他文件夹）

![](..\img\5\image.png)

 双击解压后的文件夹

![](..\img\5\image1.png)

 进入安装目录（下图），将本电脑道路编辑软件的saimo.license拷贝到RoadDesigner文件夹下，替换原有的saimo.license。

![](..\img\5\image2.png)

 从Sim Pro控制栏中的快捷键进入到道路编辑软件的主界面。

![](..\img\5\image3.png)



## ***1.3操作界面***

![](..\img\5\image4.png)

操作界面主要分为菜单栏、工具栏、编辑区、2D编辑区、状态栏、元素视图、属性区、道路工具、元素库共9个区域，下面将详细介绍每一区域的具体功能。

### **1.3.1** ***菜单栏***

菜单栏从左往右依次是：文件、编辑、资源和帮助。

![](..\img\5\image95.jpg)

#### **1.3.1.1** ***文件***

![](..\img\5\image5.png)

**1.** ***新建***：点击 “新建” 可以新建一个空白的道路编辑器界面。

**2.** ***打开***：点击 “打开” 可以打开.sre格式的中间文件。

**3.** ***保存***：点击 “保存” 可以保存为.sre格式的中间文件。

**4.** ***另存为***：点击 “另存为” 可以将当前文件存储到指定位置

**5.** ***导入OpenDRIVE文件***：点击该按钮可以导入OpenDRIVE格式（.xodr后缀）的文件，并显示在道路编辑器的编辑区中。

**6.** ***导入OpenStreetMap文件***：点击该按钮可以导入OpenStreetMap格式（.osm后缀）的文件，并显示在道路编辑器的编辑区中。

**7.** ***导入OpenCRG文件***：点击该按钮可以导入OpenCRG格式（.CRG或.crg后缀）的文件。导入的CRG文件可被用于设置道路的路面属性。

**8.** ***生成OpenDRIVE文件***：点击该按钮，并在二级菜单中选择OpenDRIVE的版本，可以将道路编辑器中编辑区的内容生成相应OpenDRIVE格式（.xodr后缀）的文件。

**9.** ***退出***：点击该按钮直接退出道路编辑器。

#### **1.3.1.2** ***编辑***

![](..\img\5\image7.png)

**1.** ***交通灯控制器***

面板左边显示控制器序号，在这里可以新建和删除控制器。

面板右边显示控制器属性，在这里可以给控制器命名、选择控制的交叉口（如果没有交叉口选择“无”）、自定义控制器的类型、选择控制的交通灯。下方的交通灯列表分2列展示了交通灯在该控制器中的序号和交通灯在全局中的序号。点击“交通灯名称”按钮，可以对交通灯名称进行升序或降序的排序。

（注意：1个交通灯最多只能关联1个控制器）

![](..\img\5\image8.png)

**2.** ***自定义交通标志***

用户可以导入自定义的交通标志至元素库。

![](..\img\5\image9.png)

点击“添加”，添加一个自定义交通标志。用户需要在弹窗的右侧配置它的基本信息和详细信息，包括为元素命名、选择元素的3D模型、选择元素的图标、定义元素的类型、子类型、高度和宽度。需要注意的是，交通标志之间类型和子类型不能同时重复。配置信息完成后，用户可以在交通标志列表中对其进行上移、下移、删除等操作。

导入自定义交通标志成功后，其图标将显示在元素库的交通标志标签页下。自定义的元素可以同系统自带的元素一样正常使用。

**3.** ***自定义路面标志***

用户可以导入自定义的路面标志至元素库。

![](..\img\5\image10.png)

点击“添加”，添加一个自定义路面标志。用户需要在弹窗的右侧配置它的基本信息和详细信息，包括为元素命名、选择元素的3D模型、选择元素的图标、定义元素的长度、宽度和高度。需要注意的是，路面标志之间名称不能重复。配置信息完成后，用户可以在路面标志列表中对其进行上移、下移、删除等操作。

导入自定义路面标志成功后，其图标将显示在元素库的路面标志标签页下。自定义的元素可以同系统自带的元素一样正常使用。

**4.** ***自定义交通灯***

用户可以导入自定义的交通灯至元素库。

![](..\img\5\image11.png)

交通灯的导入方法与交通标志的导入方法类似。

导入自定义交通灯成功后，其图标将显示在元素库的交通灯标签页下。自定义的元素可以同系统自带的元素一样正常使用。

**5.** ***自定义物体***

用户可以导入自定义的物体至元素库。

![](..\img\5\image12.png)

物体的导入方法与交通灯的导入方法类似。

导入自定义物体成功后，其图标将显示在元素库的物体标签页下。自定义的元素可以同系统自带的元素一样正常使用。

#### **1.3.1.3** ***帮助***

帮助列表下包含关于。

**1.** ***关于***

关于展示了道路编辑器的版本信息、版权信息和所属单位。

![](..\img\5\image13.png)

### **1.3.2** ***工具栏***

![](..\img\5\image14.png)

**1.** ***新建***：点击 “新建” 会新建一个道路编辑器的界面。

**2.** ***打开***：点击 “打开” 可以打开.sre格式的中间文件。

**3.** ***保存***：点击 “保存” 可以保存当前文件的当前状态。

**4.** ***2D编辑***：点击“2D编辑”会显示2D编辑区，在2D编辑区可以查看和编辑道路的高程和超高程。

**5.** ***网格***：点击“网格”可以显示主界面背景的网格，每个网格代表10*10米的距离。

**6.** ***放大***：点击 “放大” 会以当前界面的中心点为放大中心点进行放大

**7.** ***缩小***：点击 “缩小” 会以当前界面的中心点为缩小中心点进行缩小

**8.** ***居中***：点击“居中”会将已绘制的道路置于编辑区中央，并自动放缩至合适的大小比例。

### **1.3.3** ***编辑区***

编辑区支持用户使用左侧的道路工具和元素库通过鼠标点击实现自由绘制、修改道路或者添加物体等操作。

![](..\img\5\image15.png)

#### **1.3.3.1** ***调节视图***

放大：鼠标滚轮上滑。

缩小：鼠标滚轮下滑。

移动：按住鼠标滚轮的同时拖动鼠标。

#### **1.3.3.2** ***滚动条***

可以通过拖动编辑区右侧和下侧的滚动条或点击右侧和下侧的三角形按键，调节当前界面的位置。

#### **1.3.3.3** ***选中功能***

选中1个元素：鼠标左键点击目标元素即可。

选中多个元素：在空白处点击鼠标左键不松开，拖动形成矩形选框。选中逻辑为相交选中，即凡是与选框有交集的元素皆被选中。

取消选中：点击空白区即可。

### **1.3.4** ***2D编辑区***

点击工具栏中的“2D编辑”，可以显示/隐藏2D编辑区。

2D编辑区有高程和超高程两个子界面，分别展示道路的高程和超高程函数曲线信息，用户可以在2D编辑区直接对高程和超高程曲线进行编辑。

#### **1.3.4.1** ***高程***

高程子界面的坐标系为S-Z坐标系，显示当前选中道路的高程信息。

***交互方式：***

①　在主界面或元素视图选中1条道路（或1个元素）时，2D编辑区显示该道路（或该元素所属道路）的高程函数曲线及所有型值点。

![](..\img\5\image16.png)

②　选中1个型值点时，该型值点高亮，其控制点显现。通过左键调整控制点和型值点，可以调整该条道路当前控制区域的高程。

![](..\img\5\image17.png)

③　左键点击函数曲线上非控制点和型值点的位置，可以选中该点所在函数区间所对应的高程曲线段，曲线段高亮。左键上下左右拖动该曲线段，可以调整该条道路当前控制区域的高程，拖动过程中曲线段形状保持不变。

![](..\img\5\image18.png)

④　右键点选函数曲线上的任意一点，可在道路上添加型值点，添加后高程函数曲线不变。与此同时，属性区也新增一个高程偏移量。

![](..\img\5\image19.png)

⑤　属性区的参数跟着调整而变化。同理，属性区的调整也会展现在2D编辑区中。

#### **1.3.4.2** ***超高程***

超高程子界面的坐标系为S-夹角坐标系（单位：弧度），显示当前选中道路的超高程信息。

![](..\img\5\image20.png)

***交互方式：***

①　在主界面或元素视图选中1条道路（或1个元素）时，2D编辑区显示该道路（或该元素所属道路）的超高程函数曲线及所有型值点。

②　选中1个型值点时，该型值点高亮，其控制点显现。通过左键调整控制点和型值点，可以调整该条道路当前控制区域的超高程。

③　左键点击函数曲线上非控制点和型值点的位置，可以选中该点所在函数区间所对应的超高程曲线段，曲线段高亮。左键上下左右拖动该曲线段，可以调整该条道路当前控制区域的超高程，拖动过程中曲线段形状保持不变。

④　右键点选函数曲线上的任意一点，可在道路上添加型值点，添加后超高程函数曲线不变。与此同时，属性区也新增一个超高程偏移量。

⑤　属性区的参数跟着调整而变化。同理，属性区的调整也会展现在2D编辑区中。

### **1.3.5** ***状态栏***

状态栏位于编辑区下方。

当鼠标位于编辑区空白处时，状态栏显示鼠标当前位置（X、Y、Z坐标）。

![](..\img\5\image21.png)

当鼠标位于道路上时，状态栏显示鼠标当前位置（X、Y、Z坐标）及道路信息（Roadld、Laneld、S、T、W、R、Hdg）。

![](..\img\5\image22.png)

Road id：道路id

Lane id：车道id

S：当前点在基准线坐标系中的s坐标

T：当前点在基准线坐标系中的t坐标，表示当前点相对于基准线的横向偏移量，T的取值范围为[-W，W]

W：当前点所在道路段的宽度

R：当前点所在道路段的曲率半径（直道的R为-inf）

Hdg：基准线（或基准线切线）与x轴正半轴夹角大小，单位为rad

### **1.3.6** ***元素视图***

#### **1.3.6.1** ***元素视图结构***

元素视图中显示编辑区中绘制的所有元素，并将元素分类至道路和交叉口两个大的类目，逐级展示各个元素的名称和组成结构。

1.***道路***

点击“道路”左侧的三角标志，展示编辑区的全部道路。

点击具体一条道路左侧的三角标志，展示该条道路的组成部分，包括道路段、交通标志、路面标志、交通灯和物体5个部分。

点击组成部分（如道路段）左侧的三角标志，展示该组成部分下具体的组成元素。例如：

![](..\img\5\image23.png)

2.***交叉口***

每个交叉口由多个（2-8个）来路组成。点击某个交叉口左侧的三角标志，展示该交叉口下的全部来路。

#### **1.3.6.2** ***选中元素***

在元素视图区点击元素的名称，可以选中该元素，同时该元素会在编辑区蓝色高亮。反之，在编辑区点击某元素，该元素的名称也会在元素视图区蓝色高亮，方便快速查找元素名称、编辑元素等。

#### **1.3.6.3** ***删除元素***

在元素视图内选中某个元素，点击鼠标右键，再点击删除按钮，可将当前元素及其子元素删除。

### **1.3.7** ***属性区***

点击元素视图区不同的元素，属性区出现对应元素的属性。拖动属性区上方的6个点标志，可以调节属性区面板的高度。

#### **1.3.7.1** ***道路属性***

道路的属性区包括道路的基本信息：道路ID、道路名称、该道路所属交叉口、道路长度。

道路的属性区还包括6个子模块：道路段、几何形状、高程、超高程、连接、路面。

**1.** ***道路段***

一条道路可被拆分为多条道路段，属性区罗列所选中道路<lanes>下的道路段信息。<lanes>下有几个<laneSection>标签，就有几个道路段。一条道路至少拥有一个道路段。

![](..\img\5\image24.png)

点击“添加”按钮，可以在道路段列表的下方添加一个道路段，用户可以编辑偏移量的值，编辑后道路段列表按照偏移量的值升序排列。

选中一个道路段，点击“![](..\img\5\image25.png)”按钮，可以删除该道路段，即删除<lanes>标签下的该偏移量对应的<laneSection>。

**2.** ***几何形状***

几何形状展示道路参考线的几何形状，有直线、螺旋线、弧线、带参三次多项式四种形状。

![](..\img\5\image26.png)

左侧的偏移量列表罗列所选中道路< planView>下的路段信息，< planView>下有几个<geometry>标签，就有几个偏移量。偏移量的值与<geometry>中的s对应。

右侧显示在该偏移量下道路参考线的起始点的坐标、道路参考线的几何形状、道路参考线的长度、道路参考线的初始方向。

对于圆弧，还要显示其曲率半径和圆心角：

![](..\img\5\image27.png)

对于螺旋线，还要显示其开始曲率和结束曲率：

![](..\img\5\image28.png)

对于带参三次多项式，还要显示aU、bU、cU、dU、aV、bV、cV、dV八个参数及参数p的取值范围pRange。

![](..\img\5\image29.png)

**3.** ***高程***

一条道路可以沿其参考线被标高。高程指的是道路基准线上某一点与该点在x/y平面上的投影之间的垂直距离。高程以米为单位。

![](..\img\5\image30.png)

左侧的偏移量列表罗列所选中道路<elevationProfile>下的路段信息，<elevationProfile>下有几个<elevation>标签，就有几个偏移量。偏移量的值与<elevation >中的s对应。用户可自行添加和删除偏移量。

右侧显示在该偏移量下道路高程函数（三次多项式）的参数a、b、c、d，四个参数皆可编辑。

**4.** ***超高程***

一条道路可以往内侧倾斜，从而使车辆更容易驶过。超高程指的是围绕参考线的道路横截面的倾斜角。超高程以rad为单位。对于向右边倾斜的道路，超高程具有正值；对于向左边倾斜的道路，超高程具有负值。

![](..\img\5\image31.png)

左侧的偏移量列表罗列所选中道路<lateralProfile>下的路段信息，<lateralProfile>下有几个<superelevation>标签，就有几个偏移量。偏移量的值与< superelevation>中的s对应。用户可自行添加和删除偏移量。

右侧显示在该偏移量下道路超高程函数（三次多项式）的参数a、b、c、d，四个参数皆可编辑。

**5.** ***连接***

在此显示该道路的前驱道路ID、该道路与前驱道路的连接类型、该道路的后继道路ID、该道路与后继道路的连接类型。如果是交叉口的连接道路，还会显示连接点信息（开始/结束）。

![](..\img\5\image32.png)

**6.** ***路面***

在此可以设置道路的路面属性。

![](..\img\5\image33.png)

左侧的偏移量列表罗列所选中道路<surface>下的路段信息，<surface>下有几个<CRG>标签，就有几个偏移量区间。偏移量区间的开始s与< CRG>中的sStarrt对应，结束s与< CRG>中的sEnd对应。用户可自行添加和删除偏移量区间。

右侧显示在该偏移量区间下，路面的CRG文件及属性。在CRG下拉框中，可以选择一个已经导入的CRG文件应用于此偏移量区间的路面（CRG文件的导入方法为“文件”-“导入OpenCRG文件”）。同时，还可以设置CRG文件的方向、模式、用途、s偏移、t偏移、z偏移、z比例、h偏移等信息。

 

#### ***1.3.7.2 道路段属性区***

在元素视图选中某个道路段，可以在属性区内对每条车道进行配置。

***1.车道数量***

属性区显示该道路段下的所有车道ID。0车道左侧ID为正，0车道右侧ID为负。车道数量最多为10条。

面板最多展示5条车道，当车道数量超过5条时， 可以点击右侧三角按钮切换车道，也可以滑动滚轮来切换车道。  

点击“![](..\img\5\image34.png)”按钮，可以在选中车道的左侧添加一条新车道。点击“![](..\img\5\image35.png)”按钮，可以在选中车道的右侧添加一条新车道。点击“![](..\img\5\image36.png)”按钮，可以删除选中的车道，但0车道不可被删除。       

![](..\img\5\image37.png)

***2.基本属性***

用户可以在属性区设置车道的类型和车道是否保持水平。

![](..\img\5\image38.png)

车道类型有15种，分别为：无（None）、机动车道（Driving）、停车道（Stop）、路肩（Shoulder）、自行车道（Biking）、人行道（Sidewalk）、道路边线（Border）、限制区域（Restricted）、停车场（Parking）、入口车道（Entry ）、出口车道（Exit）、出口匝道（offRamp）、入口匝道（onRamp）、双向车道（Bidirectional）和分隔带（Median ）。

可以设置车道保持水平或不保持水平。

***3.宽度***

车道宽度仅支持非0车道显示。

![](..\img\5\image39.png)

宽度属性区左侧显示偏移量，在这里可以对偏移量进行添加、修改、删除等操作。

属性区右侧显示车道在该偏移量下的插值方式和初始宽度。

车道宽度用三次多项式描述：tborder = a+ b*ds + c*ds2 + d*ds3。初始宽度对应三次多项式的a，表示在@sds=0)处的车道宽度。不同的车道类型有不同的默认初始宽度，如：机动车道的默认初始宽度为3.5m。

插值方式有“S形”、“线性”、“无”、“自定义”4种。当相邻的两个偏移量下车道初始宽度不同时：“S形”插值方式使得车道宽度呈平滑过渡，三次多项式中的b取固定值0；“线性”插值方式使得车道宽度呈线性过渡，三次多项式中的c和d取固定值0；“无”插值方式使得车道宽度呈阶梯型跳跃，三次多项式中的b、c和d取固定值0；“自定义”插值方式允许用户自定义三次多项式中a、b、c、d的值。

***4.路标***

车道路标支持所有车道显示。

![](..\img\5\image40.png)

路标属性区左侧显示偏移量，在这里可以对偏移量进行添加、修改、删除等操作。

属性区右侧显示车道在该偏移量下的路标的类型、颜色、粗细、宽度和高度，用户可编辑。

***5.连接***

连接仅支持非0车道显示。

![](..\img\5\image41.png)

属性区显示该车道的前驱车道ID和后继车道ID。

***6.速度***

车道限速仅支持非0车道显示。

![](..\img\5\image42.png)

速度属性区左侧显示偏移量，在这里可以对偏移量进行添加、修改、删除等操作。

属性区右侧显示车道在该偏移量下的车道限速，默认为60km/h，用户可编辑。

#### **1.3.7.3 交通灯/交通标志属性区**

交通灯和交通标志的属性区如下图所示。

用户可以查看元素的ID、名称、类型、子类型，可以查看和编辑元素的方向、位置（s、t、z-偏移）、角度（俯仰角偏移、俯仰角、翻滚角）。

![](..\img\5\image43.png)

#### **1.3.7.4** ***路面标志/物体属性区***

路面标志和物体的属性区如下图所示。

用户可以查看元素的ID、名称、类型，可以查看和编辑元素的位置（s、t、z-偏移）和角度（俯仰角、俯仰角、翻滚角）。

![](..\img\5\image44.png)

### **1.3.8** ***道路工具***

道路工具包含了组成道路的基本元素，下面将详细介绍。

#### **1.3.8.1** ***直道***

***1.直道的绘制***

![](..\img\5\image45.png)

鼠标左键在编辑区中点击第一次，生成直道的起始点，之后任意位置点击第二次，生成结束点，此时一条直路绘制完毕，自动显示道路中间的基准线。继续在其他地方点击可以继续绘制道路。右键单击可以取消当前的绘制状态。

***2.直道的编辑***

鼠标左键单击一条直路，选中该道路（道路变蓝），出现直道的两端点。起始点为蓝色三角形，结束点为蓝色正方形。鼠标左键选中任意一个蓝色的点不松开，滑动鼠标即可改变该点的位置，道路长度也会随之改变。注意，起始点和结束点只能在基准线所在直线上移动，即只能改变直道的长度，不能改变直道的方向。

***2.直道的右键菜单***

在绘制完毕的道路上右键单击会出现下图中的列表：

![](..\img\5\image46.png)

列表包含删除、切换方向和合并道路三个选项。

1) 删除：点击 “删除” 可以删除选中的道路及其上全部元素。

2) 切换方向：点击 “切换方向”可以将选中道路的起始点与结束点进行互换，基准线的方向、车道的行驶方向变为相反，但道路的形状和位置保持不变。

3) 合并道路：当只选中了1条道路时，“合并道路”按钮不可点击。当选中了2条及以上的道路时，点击 “合并道路” ，可以将选中的道路合并为1条道路。注意，能合并的道路必须是有连接关系的道路，道路基准线首尾相接且方向相同。

#### **1.3.8.2** ***圆弧***

***1.圆弧的绘制***

![](..\img\5\image47.png)

鼠标左键在编辑区单击生成圆弧的起始点，在用鼠标左键单击第二下生成圆弧的结束点，此时一个圆弧绘制完毕，自动显示道路中间的基准线。在生成起始点后单击鼠标右键即可曲线绘制状态。在不取消绘制状态的前提下，继续使用鼠标左键单击则可以继续绘制圆弧道路。

***2.圆弧的编辑***

选中绘制好的圆弧道路后，鼠标单击左键，出现圆弧道路的两端点，起始点为蓝色三角形，结束点为蓝色正方形。鼠标左键选中任意一个蓝色的点不松开，滑动鼠标可移动该点至任意位置，道路形状也会随之改变。

***3.圆弧的右键菜单***

圆弧的右键菜单同样包含删除、切换方向和合并道路三个选项。

#### **1.3.8.3** ***弯道***

***1.弯道的绘制***

![](..\img\5\image48.png)

鼠标左键在编辑区中点击生成弯道起始点，之后点击第二个点生成这一段路的结束点，该点又是下一段路的起始点，再点击生成第三个点为第二段路的结束点，以此类推，直到用户鼠标右键取消绘制状态，一条弯道绘制完毕。

***2.弯道的编辑***

选中绘制完毕的道路，出现弯道两端点，如下图：

![](..\img\5\image49.png)

鼠标单击左键选中绘制好的道路，出现弯道的两端点，起始点为蓝色三角形，结束点为蓝色正方形。鼠标左键选中任意一个蓝色的点不松开，滑动鼠标即可改变该点的位置，道路形状也会随之改变。

双击绘制完毕的道路，出现如下画面：

![](..\img\5\image50.png)

鼠标左键选中蓝色的点（型值点）不松开，滑动鼠标即可改变该点的位置，改变道路的走向。鼠标左键选中白色的点（控制点）不松开，滑动鼠标即可改变弯道的拐弯处的弯曲状态（拐的急或者拐的缓）。

***3.弯道的右键菜单***

弯道的右键菜单同样包含删除、切换方向和合并道路三个选项。

#### **1.3.8.4** ***交叉口***

***1.框选交叉口区域***

首先绘制两条或多条道路，类型不限（注意：目前仅支持创建2-8条道路的交叉口）。绘制完毕后，选择道路工具中的交叉口按钮，将道路与道路之间距离最近的端点，通过鼠标框选在一个区域里，如下图（此处以三条任意类型道路为例）：

![](..\img\5\image51.png)

框选结束后，单击鼠标右键，退出“交叉口”状态。交叉口区域显示为蓝色虚线边框。

***2.绘制交叉口***

鼠标左键单击蓝色的虚线框，或在元素视图里选中该交叉口，交叉口蓝框的右上方出现三个按钮，自上而下是：添加按钮、连接按钮、删除按钮。

下面介绍交叉口的绘制步骤：

| 不可选状态                   | 可选状态（高亮）             | 交叉口的绘制步骤                                             |
| ---------------------------- | ---------------------------- | ------------------------------------------------------------ |
| ![](..\img\5\image52.png)    | ![](..\img\5\image53.png)    | ***步骤1：点击添加按钮。***点击后，每条道路的每条车道的端末都出现1个小水滴（见下图）。一类水滴是蓝色，尖尖指向道路外部，代表车辆驶入交叉口；一类水滴是灰色，尖尖指向道路内部，代表车辆驶出交叉口。（蓝色表示可选，灰色表示不可选，水滴的尖尖表示所在车道的正方向）***步骤2：选择1个（或多个）驶入交叉口的蓝色水滴。***水滴选中后变为绿色，即确定了连接路段的驶入方向。此时，其余来路水滴变为灰色，去路水滴变为蓝色。（点击绿色水滴可取消选择，退回上一步）***步骤3：再选择1个（或多个）驶出交叉口的蓝色水滴。***水滴选中后变为绿色，即确定了连接路段的驶出方向。此时，剩余水滴全变为灰色。注意：选中的车道属性要对应，否则无法生成连接道路。（例如，机动车道无法连接至自行车道） |
| ![img](..\img\5\image54.png) | ![img](..\img\5\image55.png) | ***步骤4：点击连接按钮。***在完成水滴的选择后，连接按钮会高亮，点击后自动生成1个（或多个）连接车道，把水滴所在的单向路连接起来。（连接车道归驶入方向所在来路所有）***步骤5：重复步骤1-4至完成交叉口的绘制。*** |
| ![img](..\img\5\image56.png) | ![img](..\img\5\image57.png) | 删除按钮在选种一条连接好的道路后会高亮，点击该按钮会删除选中的连接路段。 |

 

表 1 交叉口的绘制步骤

![](..\img\5\image58.png)

***3.删除交叉口***

点击蓝色虚线选框，单击右键，可选择删除交叉口。

![](..\img\5\image59.png)

 

#### **1.3.8.5** ***道路连接***

鼠标左键点击道路工具中的道路连接按钮，如下图：

![](..\img\5\image60.png)

此时每条路出现一个三角形图标![](..\img\5\image61.png)和一个正方形图标![](..\img\5\image62.png)，三角形图标表示道路的起点，正方形图标表示道路的终点。在道路连接的状态下，点击任意一条路的起点或终点，再点击另一条路（注意：选中的车道属性要对应，且道路无法自身连接)的起点或终点，道路编辑器会进行自动连接，如下图：

![](..\img\5\image63.png) 

连接后新增了一条连接道路，双击连接道路，出现蓝点、白点和虚线，可以拖动蓝点白点调整弯道的形状。

需要注意的是，此时图上的3条道路只是首尾相接，并没有合并为1条道路。如果想把3条道路合并为1条道路，需要选中3条道路，单击鼠标右键，合并道路。合并后，原本的3条道路降级为道路段，且道路段的连接处有绿色链接标志。选中链接标志，单击鼠标右键，可以选择解除该处的合并。

![](..\img\5\image64.png)

（注意：合并道路的数量上限为10个，选取的道路超过10条将无法合并。）

### **1.3.9** ***元素库***

元素库包含道路、交通标志、路面标志、交通灯和物体五个标签。

#### **1.3.9.1** ***道路***

道路标签包含了三种常用的道路类型：交叉道路、连接道路和模板道路。

***1.交叉道路***

交叉道路包括：环岛、十字路口、Y字路口。

【环岛】

点击道路标签中的环岛按钮。

在道路编辑器的编辑区空白处通过鼠标左键点击生成即可，如下图。

![](..\img\5\image65.png)

1个环岛由20条道路和4个交叉口组成。上图红圈标记的地方可以进行道路连接操作，也可以修改道路的长度。

【十字路口】

在道路标签中选中十字路口按钮。

选中十字路口按钮后，在道路编辑器的编辑区中通过鼠标左键的点击生成十字路口模板。

![](..\img\5\image66.png)

1个十字路口由16条道路和1个交叉口组成。红圈标记的地方可以进行道路连接操作，也可以修改道路的长度。

【Y字路口】

在道路标签中选中Y字路口按钮。

选中Y字路口按钮后，在道路编辑器的编辑区中通过鼠标左键的点击生成Y字路口模板。

![](..\img\5\image67.png)

1个Y字路口由9条道路和2个交叉口组成。红圈标记的地方可以进行道路连接操作，也可以修改道路的长度。

***2.连接道路***

连接道路包括：并道、高速出口和高速入口。

【并道】

点击连接道路下的并道按钮，在道路编辑器的编辑区中单击生成并道模板，模板两端可以与其他道路进行道路连接。

![](..\img\5\image68.png)

【高速出口】

点击连接道路下的高速出口按钮，在道路编辑器的编辑区中单击生成高速出口模板，模板两端可以与其他道路进行道路连接。

![](..\img\5\image69.png)

【高速出口】

点击连接道路下的高速入口按钮，在道路编辑器的编辑区中单击生成高速入口模板，模板两端可以与其他道路进行道路连接。

![](..\img\5\image70.png)

***3.模板道路***

模板道路分为国道、省道、高速路、乡村路、城市路、快速路、双车道、四车道、六车道、八车道共10种。点击模板道路下的对应模板道路按钮，在道路编辑器的编辑区中单击生成即可生成对应的模板道路。

![](..\img\5\image71.png)

下面介绍各个道路模板的含义及车道组成部分。

（1）国道

国道是国家级干线公路，是具有全国性政治、经济意义的主要干线公路。

![](..\img\5\image72.png)

（2）省道

省道是具有全省（自治区、直辖市）政治、经济意义，并由省（自治区、直辖市）公路主管部门负责修建、养护和管理的的公路干线。

![](..\img\5\image73.png)

（3）高速公路

高速公路是全部控制出入、专供汽车在分隔的车道上高速行驶的公路。

![](..\img\5\image74.png)

（4）乡村路

乡村路主要为乡（镇）村经济、文化、行政服务的公路，以及不属于县道以上公路的乡与乡之间及乡与外部联络的公路。

![](..\img\5\image75.png)

（5）城市路

城市路是城市规划区内的公共道路，一般划设人行道、车行道和交通隔离设施等。

![](..\img\5\image76.png)

（6）快速路

快速公路是介于普通公路与高速公路之间的汽车专用道路。

![](..\img\5\image77.png)

（7）双车道

基准线左右各一个机动车道。

![](..\img\5\image78.png)

（8）四车道

基准线左右各两个机动车道。

![](..\img\5\image79.png)

（9）六车道

基准线左右各三个机动车道。

![](..\img\5\image80.png)

（10）八车道

基准线左右各四个机动车道。

![](..\img\5\image81.png)

#### **1.3.9.2** ***交通标志***

交通标志为符合国家标准下的道路交通标志。

![](..\img\5\image82.png)

![](..\img\5\image94.png)

先鼠标左键点击选取交通标志，再点击道路的某一位置，可以将交通标志放在路面的该位置上。交通标志的方向会自适应道路基准线的方向和车道的行驶方向。

放置后，鼠标左键点击交通标志不松开，拖动交通标志，可以改变交通标志在道路上的位置。鼠标左键点按住交通标志的方向指示箭头并拖动，可以调整交通灯的航向角偏移。

![](..\img\5\image83.png)

在交通标志上右键单击出现删除列表，点击删除进行交通标志的删除。例如下图：

![](..\img\5\image84.png)

#### **1.3.9.3** ***路面标志***

路面标志为符合国家标准规定的路面标志。

![](..\img\5\image85.png)

先鼠标左键点击选取路面标志，再点击道路的某一位置，可以将路面标志放在路面的该位置上。路面标志的方向会自适应道路基准线的方向和车道的行驶方向，其中人行横道和停止线还会自适应道路的宽度。

放置后，可以点击鼠标左键不松开，拖动标志，改变标志在道路上的位置。路面标志的方向不支持用户自定义。

在道路标志上右键单击出现删除列表，点击删除进行道路标志的删除。例如下图：

![](..\img\5\image86.png)

#### **1.3.9.4** ***交通灯***

交通灯控制着车道的流向，红灯停，绿灯行，黄灯等一等。道路编辑器提供了7种交通灯（对行人及车辆），分别是标准指示灯、前行指示灯、左转指示灯、右转指示灯、自行车指示灯、行人指示灯、双色指示灯。

![](..\img\5\image87.png)

先鼠标左键点击选取交通灯，再点击道路的某一位置，可以将交通灯放在路面的该位置上。交通灯的方向会自适应道路基准线的方向和车道的行驶方向。

![](..\img\5\image88.png)

放置后，鼠标左键点击交通灯不松开，拖动交通灯，可以改变交通灯在道路上的位置。鼠标左键点按住交通灯的方向指示箭头并拖动，可以调整交通灯的航向角偏移。

在交通灯上右键单击出现删除列表，点击删除进行交通灯的删除。例如下图：

![](..\img\5\image89.png)

#### **1.3.9.5** ***物体***

物体中包含了静态场景中除道路元素外的其他元素，如交通锥、建筑物、交通护栏、路灯、植物、障碍物、悬臂式柱、6米柱、3米柱等。

![](..\img\5\image90.png)

先选中一条目标道路，再选取物体列表中的元素，再点击编辑区的道路及道路两侧的位置，可以将物体放置在该位置上。与其他元素不同是，物体可以放置在道路外，但不能超过道路的两端，即不能放在道路的s、t坐标系描述不到的地方，其中s的取值范围为[0，道路长度]。

放置后，可以点击鼠标左键不松开，拖动物体，改变物体在道路上的位置。鼠标左键点按住物体的方向指示箭头并拖动，可以调整物体的航向角。

![](..\img\5\image91.png)

在物体上右键单击出现删除列表，点击删除进行物体的删除。例如下图：

![](..\img\5\image92.png)
